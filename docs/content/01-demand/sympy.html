

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SymPy &#8212; Data 88: Economic Models Textbook</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/plotly.min.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.13.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Supply &amp; Elasticity" href="../02-supply/index.html" />
    <link rel="prev" title="Market Equilibria" href="market-equilibria.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/econ-models.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Data 88: Economic Models Textbook</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="reference internal" href="index.html">
   Demand &amp; Market Equilibrium
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="demand.html">
     Demand Curves
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="market-equilibria.html">
     Market Equilibria
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     SymPy
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02-supply/index.html">
   Supply &amp; Elasticity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03-public/index.html">
   Public Economics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04-production/index.html">
   Production
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../05-utility/index.html">
   Utility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06-development/index.html">
   Development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07-game-theory/index.html">
   Game Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../08-behavioral/index.html">
   Behavioral Economics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09-finance/index.html">
   Finance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10-inequality/index.html">
   Inequality
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11-econometrics/index.html">
   Econometrics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12-macro/index.html">
   Macroeconomic Policy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   Bibliography
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/01-demand/sympy.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ds-connectors/econ-models-Textbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ds-connectors/econ-models-Textbook/master?urlpath=tree/content/01-demand/sympy.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/ds-connectors/econ-models-Textbook&urlpath=tree/econ-models-Textbook/content/01-demand/sympy.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> On this page
        </div>
        <nav id="bd-toc-nav">
            
        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="sympy">
<h1>SymPy<a class="headerlink" href="#sympy" title="Permalink to this headline">¶</a></h1>
<p>Python has many tools, such as the <a class="reference external" href="https://docs.sympy.org/latest/tutorial/index.html">SymPy library</a> that we can use for expressing and evaluating formulas and functions in economics. Since SymPy helps with symbolic math, we start out by create a symbol using <code class="docutils literal notranslate"><span class="pre">Symbol</span></code>, which we assign to a variable name. Then, we can use the symbols to construct symbolic expressions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_3_0.png" src="../../_images/sympy_3_0.png" />
</div>
</div>
<p>Now let’s try using SymPy to create a symbolic expression for some hypothetical supply and demand curves. To define an upward sloping supply curve, we start off defining the symbol <span class="math notranslate nohighlight">\(Q\)</span>, which represents quantity. Then, we set up a negative relationship expressing <span class="math notranslate nohighlight">\(P_S\)</span>, which denotes the price of the supplied good (how much the producer earns), in terms of <span class="math notranslate nohighlight">\(Q\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Q</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s1">&#39;Q&#39;</span><span class="p">)</span>
<span class="n">P_S</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">Q</span> <span class="o">-</span> <span class="mi">3</span>
<span class="n">P_S</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_5_0.png" src="../../_images/sympy_5_0.png" />
</div>
</div>
<p>Similarly, we will also use <span class="math notranslate nohighlight">\(Q\)</span> to express a relationship with <span class="math notranslate nohighlight">\(P_D\)</span>, the price of the good purchased (how much the consumer pays), creating a downward sloping demand curve. Note that both functions are of the variable <span class="math notranslate nohighlight">\(Q\)</span>; this will be important in allowing us to solve for the equilibrium.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P_D</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">Q</span>
<span class="n">P_D</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_7_0.png" src="../../_images/sympy_7_0.png" />
</div>
</div>
<p>To solve for the equilibrium given the supply and demand curve, we know that the price paid by consumers must equal to the price earned by suppliers. Thus, <span class="math notranslate nohighlight">\(P_D = P_S\)</span>, allowing us to set the two equations equal to each other and solve for the equilibrium quantity and thus equilibrium price. To solve this by hand, we would set up the following equation to solve for <span class="math notranslate nohighlight">\(Q\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
P_D = P_S\\
2-Q = 2Q-3
\end{split}\]</div>
<p>Using SymPy, we call <code class="docutils literal notranslate"><span class="pre">solve</span></code>, which takes in 2 arguments that represent the 2 sides of an equation and solves for the underlying variable such that the equation holds. Here, we pass in <span class="math notranslate nohighlight">\(P_D\)</span> and <span class="math notranslate nohighlight">\(P_S\)</span>, both represented in terms of <span class="math notranslate nohighlight">\(Q\)</span>, to solve for the value of <span class="math notranslate nohighlight">\(Q\)</span> such that <span class="math notranslate nohighlight">\(P_D=P_S\)</span>. It’s good to know that <code class="docutils literal notranslate"><span class="pre">solve</span></code> is a custom function, and will be provided in the notebooks for you.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Q_star</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">P_D</span><span class="p">,</span> <span class="n">P_S</span><span class="p">)</span>
<span class="n">Q_star</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_9_0.png" src="../../_images/sympy_9_0.png" />
</div>
</div>
<p>The value of <span class="math notranslate nohighlight">\(Q\)</span> that equates <span class="math notranslate nohighlight">\(P_D\)</span> and <span class="math notranslate nohighlight">\(P_S\)</span> is known as the market equilibrium quantity, and we denote it as <span class="math notranslate nohighlight">\(Q^*\)</span>. Here, <span class="math notranslate nohighlight">\(Q^* = \frac{5}{3}\)</span>.</p>
<p>With <span class="math notranslate nohighlight">\(Q^*\)</span> determined, we can substitute this value as <span class="math notranslate nohighlight">\(Q\)</span> to thus calculate <span class="math notranslate nohighlight">\(P_D\)</span> or <span class="math notranslate nohighlight">\(P_S\)</span>. We substitute values using the <code class="docutils literal notranslate"><span class="pre">subs</span></code> function, which follows the syntax <code class="docutils literal notranslate"><span class="pre">expression.subs(symbol_we_want_to_substitute,</span> <span class="pre">value_to_substitute_with)</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P_D</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">Q_star</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_11_0.png" src="../../_images/sympy_11_0.png" />
</div>
</div>
<p>We can also substitute <span class="math notranslate nohighlight">\(Q^*\)</span> into <span class="math notranslate nohighlight">\(P_S\)</span>, and should get the same results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P_S</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">Q_star</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_13_0.png" src="../../_images/sympy_13_0.png" />
</div>
</div>
<p>Thus, the equilibrium price and quantity are \$0.33 and <span class="math notranslate nohighlight">\(\frac{5}{3}\)</span>, respectively.</p>
<p>Let’s try another example. Suppose our demand function is <span class="math notranslate nohighlight">\(\text{Price}_{D}=-2 \cdot \text{Quantity} + 10\)</span>. Using SymPy, this would be</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">demand</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">Q</span> <span class="o">+</span> <span class="mi">10</span>
<span class="n">demand</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_15_0.png" src="../../_images/sympy_15_0.png" />
</div>
</div>
<p>In addition, let the supply function be <span class="math notranslate nohighlight">\(\text{Price}_{S}=3 \cdot \text{Quantity} + 1\)</span>. Using SymPy, this would be</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">supply</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">Q</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">supply</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_17_0.png" src="../../_images/sympy_17_0.png" />
</div>
</div>
<p>We will now try to find the market equilibrium. The market price equilibrium <span class="math notranslate nohighlight">\(P^*\)</span> is the price at which the quantity supplied and quantity demanded of a good or service are equal to each other. Similarly, the market quantity equilibrium <span class="math notranslate nohighlight">\(Q^*\)</span> is the quantity at which the price paid by consumers is equal to the price received by producers.</p>
<p>Combined, the price equilibrium and quantity equilibrium form a point on the graph with quantity and price as its axes, called the equilibrium point. This point is the point at which the demand and supply curves intersect.</p>
<p>First, we solve for the quantity equilibrium.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Q_star</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">demand</span><span class="p">,</span> <span class="n">supply</span><span class="p">)</span>
<span class="n">Q_star</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_19_0.png" src="../../_images/sympy_19_0.png" />
</div>
</div>
<p>Next, we plug the quantity equilibrium into our demand or supply expression to get the price equilibrium:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">demand</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/sympy_21_0.png" src="../../_images/sympy_21_0.png" />
</div>
</div>
<p>Graphically, we can plot the supply and demand curves with quantity on the <span class="math notranslate nohighlight">\(x\)</span>-axis and price on the <span class="math notranslate nohighlight">\(y\)</span>-axis. The point at which they intersect is the equilibrium point.</p>
<div class="cell tag_remove_input docutils container">
<div class="cell_output docutils container">
<img alt="../../_images/sympy_23_0.png" src="../../_images/sympy_23_0.png" />
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/01-demand"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="market-equilibria.html" title="previous page">Market Equilibria</a>
    <a class='right-next' id="next-link" href="../02-supply/index.html" title="next page">Supply &amp; Elasticity</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Data 88 Course Staff<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>